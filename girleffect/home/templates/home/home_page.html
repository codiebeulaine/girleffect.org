{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block content %}
    {# Hero section - section includes links #}
    {% include "includes/hero_video_section.html" %}

    {# Introduction #}
    <p class="large-text">{{ page.introduction }}</p>
    
    {# Homepage Carousel #}
    {% if page.carousel_items.exists %}
    <div class="homepage-carousel">
        <h4>{{ page.overview_title }}</h4>

        {% image page.overview_image fill-100x100 as overview_image %}
        <img class="homepage-carousel overview__image" src="{{ overview_image.url }}">

        {% for item in page.carousel_items.all %}
            <div class="homepage-carousel-item">
                <h4>{{ item.title }}</h4>
                {{ item.description }}
                {% image item.image fill-100x100 as carousel_item_image %}
                <img class="homepage-carousel-item__image" src="{{ carousel_item_image.url }}">
            </div>
            {% if item.link_page %}
                <a href="{{ item.link_page.url }}">{{ item.link_text|default:item.title }}</a>
            {% elif page.link_url %}
                <a href="{{ item.url }}">{{ item.link_text|default:item.title }}</a>
            {% endif %}
        {% endfor %}
    {% endif %}
        
    {# Streamfield options #}
    <section class="section section--body">
        {{ page.body }}
    </section>

    {# Latest articles, limited to three most recent, link to all articles index #}
    {% include "includes/articles_section.html" with title="Latest News &amp; Stories" %}

    {# Call to Action, link is likely external #}
    {% if page.call_to_action %}
        <section class="cta">
            {% include "includes/call_to_action.html" %}
        </section>
    {% endif %}

{% endblock %}
